window.onload = () => {
    setTimeout(() => {
        document.getElementById("arc-widget-container") ? document.getElementById("arc-widget-container").style.setProperty("z-index", 202, "important") : null, document.getElementById("onesignal-bell-container") ? document.getElementById("onesignal-bell-container").style.setProperty("z-index", 202, "important") : null
    }, 3e3)
};

function generateRandomString(a) {
    let b = "";
    const c = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".length;
    for (let d = 0; d < a; d++) b += "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(Math.floor(Math.random() * c));
    return b
}

function refetchJsVar(a = () => {}, b = () => {}) {
    let c = document.createElement("script");
    const d = $("#appUrl").val(),
        e = init_process.env.MIX_JS_ROUTE_PARAM_ATTR,
        f = $(`[${e}]`).attr(e);
    c.setAttribute("src", `${d}/assets/js/${f}.js`), c.setAttribute("class", "js__var"), c.setAttribute("type", "text/javascript"), c.setAttribute("async", !1), document.body.appendChild(c), c.addEventListener("load", () => {
        window.currentJsRouteParam = f, a(), $(".js__var").remove()
    }), c.addEventListener("error", b)
}

function tryToGetAccessToken(a = () => {}, b = () => {}) {
    const c = $("#appUrl").val(),
        d = process.env.MIX_PREFIX_AUTH_ROUTE_PARAM,
        e = process.env.MIX_AUTH_ROUTE_PARAM,
        f = process.env.MIX_AUTH_KEY,
        g = process.env.MIX_AUTH_TOKEN;
    (function(h) {
        $.ajax({
            url: `${c}/${d}${e}`,
            headers: {
                "X-Fuck-ID": `${f}:${g}`,
                "X-Request-ID": generateRandomString(6),
                "X-Request-Index": h
            },
            method: "GET",
            dataType: "TEXT",
            success: function(b) {
                a(b)
            },
            error: function() {
                b()
            }
        })
    })(0)
}
window.getStTk = (a = () => {}, b = () => {}) => {
    const c = init_process.env.MIX_JS_ROUTE_PARAM_ATTR;
    return window.currentJsRouteParam == $(`[${c}]`).attr(c) ? void tryToGetAccessToken(a, b) : void refetchJsVar(() => {
        tryToGetAccessToken(a, b)
    }, b)
};